/* File: 04-core-code/ui/css/f2-summary-table.css */
/* [MODIFIED] (v6297 F2 Tweak) Reduced section header margin-top from 8px to 6px. */
/* [MODIFIED] (v6297 F2 Layout) Added .f2-subgrid-erb for 4-column nested grid. */
/* [MODIFIED] (v6297 F2 Layout Fix 2) Added :not() to main selector to prevent override. */
/* [MODIFIED] (v6297 F2 Grouping) Added new .f2-group-* containers. */

.f2-summary-grid {

    display: grid;
    /* Columns: A(label) B(value/input) C(value) */
    grid-template-columns: 1fr 1fr 1fr;
    gap: 4px 10px;
    /* Vertical and horizontal gap */
    align-items: center;
}

/* [MODIFIED] (v6297 F2 Layout Fix 2) Use :not() to exclude the subgrid container */
/* [MODIFIED] (v6297 F2 Grouping) Exclude new group containers as well */
.f2-summary-grid>div:not(.f2-subgrid-erb):not(.f2-group-costs):not(.f2-group-summary),
.f2-summary-grid>input {
    font-size: 0.8em;
    padding: 4px;
    box-sizing: border-box;
    min-height: 26px;
    display: flex;
    align-items: center;
}

.grid-cell-label {
    font-weight: 500;
    color: #374151;
    white-space: nowrap;
}

.grid-cell-label.text-right {
    justify-content: flex-end;
}

.grid-cell-value {
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    justify-content: flex-end;
    background-color: #e9ecef;
    border-radius: 3px;
    padding-right: 6px;
}

.grid-cell-input {
    width: 100%;
    border: 1px solid #b0b8c4;
    border-radius:
        3px;
    text-align: right;
    padding-right: 6px;
    font-family: 'Courier New', Courier, monospace;
}

.grid-cell-input::placeholder {
    text-align: center;
    font-style: italic;
}

.grid-cell-placeholder {
    visibility: hidden;
}

.grid-span-3 {
    grid-column: 1 / -1;
    /* Span all 3 columns */
}

.grid-spacer {
    min-height: 10px;
}

/* [NEW] (v6297 F2 Layout) Style for the E RB nested 4-column grid */
.f2-subgrid-erb {
    display: grid;
    /* [MODIFIED] (v6297 F2 Layout Fix) Adjust column ratios for better spacing */
    grid-template-columns: 0.8fr 1.2fr 0.8fr 1.2fr;
    gap: 4px 10px;
    /* 保持與主網格相同的間距 */
}

/* [NEW] (v6297 F2 Layout Fix 2) Apply base styles to nested grid children */
/* This fixes the layout bug by applying the missing flex/font styles */
.f2-subgrid-erb>div {
    font-size: 0.8em;
    padding: 4px;
    box-sizing: border-box;
    min-height: 26px;
    display: flex;
    align-items: center;
}

/* [END FIX] */

.section-header {
    /* [MODIFIED] Changed to span 2 columns */
    grid-column: 1 / span 2;
    font-weight: bold;
    color: #1f2937;
    background-color: #d1d5db;
    padding: 4px;
    border-radius: 3px;
    margin-top: 6px;
    /* [MODIFIED] (v6297 F2 Tweak) Was 8px */
    justify-content: center;
    font-size: 0.85em;
}

/* [ADDED] Style for the total value in the header row */
.section-header-total {
    margin-top: 6px;
    /* [MODIFIED] (v6297 F2 Tweak) Was 8px - Aligns with the section-header */
}

/* --- [NEW] (v6297 F2 Grouping) --- */
.f2-group-costs,
.f2-group-summary {
    display: grid;
    grid-template-columns: subgrid;
    /* Inherit the 3-column layout */
    gap: 4px 10px;
    /* Inherit the gap */

    padding: 10px;
    border-radius: 4px;
    margin-top: 6px;
    /* This plus 4px gap = 10px spacing */
}

/* Make headers inside groups have no top margin */
.f2-group-costs .section-header,
.f2-group-costs .section-header-total,
.f2-group-summary .section-header,
.f2-group-summary .section-header-total {
    margin-top: 0;
}

/* Add margin back for subsequent headers *within* the same group */
.f2-group-costs .section-header:not(:first-child),
.f2-group-costs .section-header-total:not(:first-child),
.f2-group-summary .section-header:not(:first-child),
.f2-group-summary .section-header-total:not(:first-child) {
    margin-top: 6px;
}


.f2-group-costs {
    background-color: #dcfce7;
    /* 淺綠 */
    border: 1px solid #166534;
    /* 深綠 */
}

.f2-group-summary {
    background-color: #cceeff;
    /* 淡粉紅 */
    border: 1px solid #dc2626;
    /* 紅色 */
}

/* --- [END NEW] --- */


/* Specific color overrides based on chart */
#f2-b4-acce-sum,
#f2-b11-e-acce-sum,
#f2-b16-surcharge-fee,
#f2-17-pre-sum {
    background-color: #fffacd;
    /* Light yellow */
}

/* [NEW] new-offer 使用淡綠色 */
#new-offer {
    background-color: #dcfce7;
}

/* [NEW] (Phase 2) f2-b24-gst 使用淡藍色 */
#f2-b24-gst {
    background-color: #e0f7fa;
    /* Light Blue */
}

/* [NEW] (Phase 2) GST label styles */
#f2-label-gst {
    background-color: #e0f7fa;
    /* Light Blue */

    border-radius: 3px;
    padding: 4px 10px 4px 4px;
    cursor: pointer;
    transition: background-color 0.2s;
}

#f2-b20-singleprofit,
#f2-b21-rb-profit,
/* [REMOVED] #f2-b23-sumprofit, */
#f2-b25-netprofit,
#f2-c17-1st-rb-price,
#f2-b22-sumprice,
/* [MOVED] */
#grand-total {
    color: #c0392b;
    /* Red */
    background-color: #f8d7da;
    /* Light pink */
}

/* --- Strikethrough Feature Styles --- */
#f2-c13-delivery-fee,
#f2-c14-install-fee,
#f2-c15-removal-fee {
    cursor: pointer;
    transition: background-color 0.2s;
}

.is-excluded {
    background-color: #f8d7da !important;
    /* Light pink */
    text-decoration: line-through;
    color: #721c24;
}

/* [NEW] (Phase 2) Add exclusion style for GST */
#f2-label-gst.is-excluded,
#f2-b24-gst.is-excluded {
    background-color: #f8d7da !important;
    /* Light pink */
    text-decoration: line-through;
    color: #721c24;
}

/* [REMOVED] v6290 Task 5: Wrapper for final total section removed */
/*
.final-total-wrapper {
    grid-column: 1 / -1; 
    display: grid;
    grid-template-columns: subgrid; 
    gap: 4px 10px; 
    
    border: 1px solid #c0392b; 
    border-radius: 4px;
    padding: 10px;
    margin-top: 8px;
}
*/

/* [NEW] v6290 Deposit/Balance styles */
.bg-light-green {
    background-color: #dcfce7;
    /* Light green */
    border-color: #86efac;
}

.bg-light-orange {
    background-color: #ffedd5;
    /* Light orange */
    border-color: #fdbf71;
}


/* Hide Number Input Spinners */
.grid-cell-input[type=number]::-webkit-outer-spin-button,
.grid-cell-input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.grid-cell-input[type=number] {
    -moz-appearance: textfield;
}